{
  "site": {
    "compilerIR": {
      "addressPools": {
        "local": {
          "ipv4": "10.19.0.0/24",
          "ipv6": "fd42:dead:beef:1900::/118"
        },
        "p2p": {
          "ipv4": "10.10.0.0/24",
          "ipv6": "fd42:dead:beef:1000::/118"
        }
      },
      "attachment": [
        {
          "segment": "tenants:mgmt",
          "unit": "s-router-access"
        },
        {
          "segment": "tenants:admin",
          "unit": "s-router-access"
        },
        {
          "segment": "tenants:clients",
          "unit": "s-router-access"
        }
      ],
      "communicationContract": {
        "allowedRelations": [
          {
            "action": "allow",
            "from": {
              "subject": "admin"
            },
            "proto": [
              "udp/53",
              "tcp/53"
            ],
            "source": {
              "id": "allow-admin-to-mgmt-dns",
              "index": 0,
              "kind": "rule",
              "priority": 100
            },
            "to": {
              "capability": "resolver",
              "subject": "mgmt"
            }
          },
          {
            "action": "deny",
            "from": {
              "subject": "clients"
            },
            "proto": [
              "udp/53",
              "tcp/53"
            ],
            "source": {
              "id": "deny-clients-to-mgmt-dns",
              "index": 1,
              "kind": "rule",
              "priority": 90
            },
            "to": {
              "capability": "resolver",
              "subject": "mgmt"
            }
          },
          {
            "action": "allow",
            "from": {
              "subject": "clients"
            },
            "proto": [
              "any"
            ],
            "source": {
              "id": "allow-clients-to-external-any",
              "index": 2,
              "kind": "rule",
              "priority": 200
            },
            "to": {
              "external": "default"
            }
          },
          {
            "action": "deny",
            "from": {
              "subject": "clients"
            },
            "proto": [
              "any"
            ],
            "source": {
              "id": "deny-clients-to-mgmt",
              "index": 3,
              "kind": "rule",
              "priority": 150
            },
            "to": {
              "subject": "mgmt"
            }
          }
        ],
        "nat": {
          "ingress": [
            {
              "fromExternal": "default",
              "toService": {
                "kind": "service",
                "name": "external-jump-host"
              }
            }
          ]
        }
      },
      "domains": {
        "tenants": [
          {
            "ipv4": "10.20.10.0/24",
            "ipv6": "fd42:dead:beef:10::/64",
            "name": "mgmt"
          },
          {
            "ipv4": "10.20.15.0/24",
            "ipv6": "fd42:dead:beef:15::/64",
            "name": "admin"
          },
          {
            "ipv4": "10.20.20.0/24",
            "ipv6": "fd42:dead:beef:20::/64",
            "name": "clients"
          }
        ]
      },
      "enterprise": "esp0xdeadbeef",
      "id": "esp0xdeadbeef.site-a",
      "routerLoopbacks": {
        "s-router-access": {
          "ipv4": "10.19.0.1",
          "ipv6": "fd42:dead:beef:1900:0:0:0:1"
        },
        "s-router-core": {
          "ipv4": "10.19.0.2",
          "ipv6": "fd42:dead:beef:1900:0:0:0:2"
        },
        "s-router-policy": {
          "ipv4": "10.19.0.3",
          "ipv6": "fd42:dead:beef:1900:0:0:0:3"
        },
        "s-router-upstream-selector": {
          "ipv4": "10.19.0.4",
          "ipv6": "fd42:dead:beef:1900:0:0:0:4"
        }
      },
      "transit": {
        "ordering": [
          [
            "s-router-core",
            "s-router-upstream-selector"
          ],
          [
            "s-router-upstream-selector",
            "s-router-policy"
          ],
          [
            "s-router-policy",
            "s-router-access"
          ]
        ]
      }
    },
    "coreNodeName": "s-router-core",
    "links": {
      "p2p-s-router-access-s-router-policy": {
        "endpoints": {
          "s-router-access": {
            "addr4": "10.10.0.0/31",
            "addr6": "fd42:dead:beef:1000:0:0:0:0/127"
          },
          "s-router-policy": {
            "addr4": "10.10.0.1/31",
            "addr6": "fd42:dead:beef:1000:0:0:0:1/127"
          }
        },
        "kind": "p2p"
      },
      "p2p-s-router-core-s-router-upstream-selector": {
        "endpoints": {
          "s-router-core": {
            "addr4": "10.10.0.2/31",
            "addr6": "fd42:dead:beef:1000:0:0:0:2/127"
          },
          "s-router-upstream-selector": {
            "addr4": "10.10.0.3/31",
            "addr6": "fd42:dead:beef:1000:0:0:0:3/127"
          }
        },
        "kind": "p2p"
      },
      "p2p-s-router-policy-s-router-upstream-selector": {
        "endpoints": {
          "s-router-policy": {
            "addr4": "10.10.0.4/31",
            "addr6": "fd42:dead:beef:1000:0:0:0:4/127"
          },
          "s-router-upstream-selector": {
            "addr4": "10.10.0.5/31",
            "addr6": "fd42:dead:beef:1000:0:0:0:5/127"
          }
        },
        "kind": "p2p"
      }
    },
    "nodes": {
      "s-router-access": {
        "interfaces": {
          "p2p-s-router-access-s-router-policy": {
            "acceptRA": false,
            "addr4": "10.10.0.0/31",
            "addr6": "fd42:dead:beef:1000:0:0:0:0/127",
            "addr6Public": null,
            "carrier": "lan",
            "dhcp": false,
            "export": false,
            "gateway": false,
            "kind": "p2p",
            "ra6Prefixes": [],
            "routes4": [],
            "routes6": [],
            "tenant": null
          }
        },
        "role": "access"
      },
      "s-router-core": {
        "interfaces": {
          "p2p-s-router-core-s-router-upstream-selector": {
            "acceptRA": false,
            "addr4": "10.10.0.2/31",
            "addr6": "fd42:dead:beef:1000:0:0:0:2/127",
            "addr6Public": null,
            "carrier": "lan",
            "dhcp": false,
            "export": false,
            "gateway": false,
            "kind": "p2p",
            "ra6Prefixes": [],
            "routes4": [],
            "routes6": [],
            "tenant": null
          }
        },
        "role": "core"
      },
      "s-router-policy": {
        "interfaces": {
          "p2p-s-router-access-s-router-policy": {
            "acceptRA": false,
            "addr4": "10.10.0.1/31",
            "addr6": "fd42:dead:beef:1000:0:0:0:1/127",
            "addr6Public": null,
            "carrier": "lan",
            "dhcp": false,
            "export": false,
            "gateway": false,
            "kind": "p2p",
            "ra6Prefixes": [],
            "routes4": [],
            "routes6": [],
            "tenant": null
          },
          "p2p-s-router-policy-s-router-upstream-selector": {
            "acceptRA": false,
            "addr4": "10.10.0.4/31",
            "addr6": "fd42:dead:beef:1000:0:0:0:4/127",
            "addr6Public": null,
            "carrier": "lan",
            "dhcp": false,
            "export": false,
            "gateway": false,
            "kind": "p2p",
            "ra6Prefixes": [],
            "routes4": [],
            "routes6": [],
            "tenant": null
          }
        },
        "role": "policy"
      },
      "s-router-upstream-selector": {
        "interfaces": {
          "p2p-s-router-core-s-router-upstream-selector": {
            "acceptRA": false,
            "addr4": "10.10.0.3/31",
            "addr6": "fd42:dead:beef:1000:0:0:0:3/127",
            "addr6Public": null,
            "carrier": "lan",
            "dhcp": false,
            "export": false,
            "gateway": false,
            "kind": "p2p",
            "ra6Prefixes": [],
            "routes4": [],
            "routes6": [],
            "tenant": null
          },
          "p2p-s-router-policy-s-router-upstream-selector": {
            "acceptRA": false,
            "addr4": "10.10.0.5/31",
            "addr6": "fd42:dead:beef:1000:0:0:0:5/127",
            "addr6Public": null,
            "carrier": "lan",
            "dhcp": false,
            "export": false,
            "gateway": false,
            "kind": "p2p",
            "ra6Prefixes": [],
            "routes4": [],
            "routes6": [],
            "tenant": null
          }
        },
        "role": "upstream-selector"
      }
    },
    "policyNodeName": "s-router-policy",
    "siteName": "esp0xdeadbeef.site-a",
    "tenantV4Base": "10.20",
    "ulaPrefix": "fd42:dead:beef",
    "upstreamSelectorNodeName": "s-router-upstream-selector"
  },
  "sites": {
    "esp0xdeadbeef.site-a": {
      "compilerIR": {
        "addressPools": {
          "local": {
            "ipv4": "10.19.0.0/24",
            "ipv6": "fd42:dead:beef:1900::/118"
          },
          "p2p": {
            "ipv4": "10.10.0.0/24",
            "ipv6": "fd42:dead:beef:1000::/118"
          }
        },
        "attachment": [
          {
            "segment": "tenants:mgmt",
            "unit": "s-router-access"
          },
          {
            "segment": "tenants:admin",
            "unit": "s-router-access"
          },
          {
            "segment": "tenants:clients",
            "unit": "s-router-access"
          }
        ],
        "communicationContract": {
          "allowedRelations": [
            {
              "action": "allow",
              "from": {
                "subject": "admin"
              },
              "proto": [
                "udp/53",
                "tcp/53"
              ],
              "source": {
                "id": "allow-admin-to-mgmt-dns",
                "index": 0,
                "kind": "rule",
                "priority": 100
              },
              "to": {
                "capability": "resolver",
                "subject": "mgmt"
              }
            },
            {
              "action": "deny",
              "from": {
                "subject": "clients"
              },
              "proto": [
                "udp/53",
                "tcp/53"
              ],
              "source": {
                "id": "deny-clients-to-mgmt-dns",
                "index": 1,
                "kind": "rule",
                "priority": 90
              },
              "to": {
                "capability": "resolver",
                "subject": "mgmt"
              }
            },
            {
              "action": "allow",
              "from": {
                "subject": "clients"
              },
              "proto": [
                "any"
              ],
              "source": {
                "id": "allow-clients-to-external-any",
                "index": 2,
                "kind": "rule",
                "priority": 200
              },
              "to": {
                "external": "default"
              }
            },
            {
              "action": "deny",
              "from": {
                "subject": "clients"
              },
              "proto": [
                "any"
              ],
              "source": {
                "id": "deny-clients-to-mgmt",
                "index": 3,
                "kind": "rule",
                "priority": 150
              },
              "to": {
                "subject": "mgmt"
              }
            }
          ],
          "nat": {
            "ingress": [
              {
                "fromExternal": "default",
                "toService": {
                  "kind": "service",
                  "name": "external-jump-host"
                }
              }
            ]
          }
        },
        "domains": {
          "tenants": [
            {
              "ipv4": "10.20.10.0/24",
              "ipv6": "fd42:dead:beef:10::/64",
              "name": "mgmt"
            },
            {
              "ipv4": "10.20.15.0/24",
              "ipv6": "fd42:dead:beef:15::/64",
              "name": "admin"
            },
            {
              "ipv4": "10.20.20.0/24",
              "ipv6": "fd42:dead:beef:20::/64",
              "name": "clients"
            }
          ]
        },
        "enterprise": "esp0xdeadbeef",
        "id": "esp0xdeadbeef.site-a",
        "routerLoopbacks": {
          "s-router-access": {
            "ipv4": "10.19.0.1",
            "ipv6": "fd42:dead:beef:1900:0:0:0:1"
          },
          "s-router-core": {
            "ipv4": "10.19.0.2",
            "ipv6": "fd42:dead:beef:1900:0:0:0:2"
          },
          "s-router-policy": {
            "ipv4": "10.19.0.3",
            "ipv6": "fd42:dead:beef:1900:0:0:0:3"
          },
          "s-router-upstream-selector": {
            "ipv4": "10.19.0.4",
            "ipv6": "fd42:dead:beef:1900:0:0:0:4"
          }
        },
        "transit": {
          "ordering": [
            [
              "s-router-core",
              "s-router-upstream-selector"
            ],
            [
              "s-router-upstream-selector",
              "s-router-policy"
            ],
            [
              "s-router-policy",
              "s-router-access"
            ]
          ]
        }
      },
      "coreNodeName": "s-router-core",
      "links": {
        "p2p-s-router-access-s-router-policy": {
          "endpoints": {
            "s-router-access": {
              "addr4": "10.10.0.0/31",
              "addr6": "fd42:dead:beef:1000:0:0:0:0/127"
            },
            "s-router-policy": {
              "addr4": "10.10.0.1/31",
              "addr6": "fd42:dead:beef:1000:0:0:0:1/127"
            }
          },
          "kind": "p2p"
        },
        "p2p-s-router-core-s-router-upstream-selector": {
          "endpoints": {
            "s-router-core": {
              "addr4": "10.10.0.2/31",
              "addr6": "fd42:dead:beef:1000:0:0:0:2/127"
            },
            "s-router-upstream-selector": {
              "addr4": "10.10.0.3/31",
              "addr6": "fd42:dead:beef:1000:0:0:0:3/127"
            }
          },
          "kind": "p2p"
        },
        "p2p-s-router-policy-s-router-upstream-selector": {
          "endpoints": {
            "s-router-policy": {
              "addr4": "10.10.0.4/31",
              "addr6": "fd42:dead:beef:1000:0:0:0:4/127"
            },
            "s-router-upstream-selector": {
              "addr4": "10.10.0.5/31",
              "addr6": "fd42:dead:beef:1000:0:0:0:5/127"
            }
          },
          "kind": "p2p"
        }
      },
      "nodes": {
        "s-router-access": {
          "interfaces": {
            "p2p-s-router-access-s-router-policy": {
              "acceptRA": false,
              "addr4": "10.10.0.0/31",
              "addr6": "fd42:dead:beef:1000:0:0:0:0/127",
              "addr6Public": null,
              "carrier": "lan",
              "dhcp": false,
              "export": false,
              "gateway": false,
              "kind": "p2p",
              "ra6Prefixes": [],
              "routes4": [],
              "routes6": [],
              "tenant": null
            }
          },
          "role": "access"
        },
        "s-router-core": {
          "interfaces": {
            "p2p-s-router-core-s-router-upstream-selector": {
              "acceptRA": false,
              "addr4": "10.10.0.2/31",
              "addr6": "fd42:dead:beef:1000:0:0:0:2/127",
              "addr6Public": null,
              "carrier": "lan",
              "dhcp": false,
              "export": false,
              "gateway": false,
              "kind": "p2p",
              "ra6Prefixes": [],
              "routes4": [],
              "routes6": [],
              "tenant": null
            }
          },
          "role": "core"
        },
        "s-router-policy": {
          "interfaces": {
            "p2p-s-router-access-s-router-policy": {
              "acceptRA": false,
              "addr4": "10.10.0.1/31",
              "addr6": "fd42:dead:beef:1000:0:0:0:1/127",
              "addr6Public": null,
              "carrier": "lan",
              "dhcp": false,
              "export": false,
              "gateway": false,
              "kind": "p2p",
              "ra6Prefixes": [],
              "routes4": [],
              "routes6": [],
              "tenant": null
            },
            "p2p-s-router-policy-s-router-upstream-selector": {
              "acceptRA": false,
              "addr4": "10.10.0.4/31",
              "addr6": "fd42:dead:beef:1000:0:0:0:4/127",
              "addr6Public": null,
              "carrier": "lan",
              "dhcp": false,
              "export": false,
              "gateway": false,
              "kind": "p2p",
              "ra6Prefixes": [],
              "routes4": [],
              "routes6": [],
              "tenant": null
            }
          },
          "role": "policy"
        },
        "s-router-upstream-selector": {
          "interfaces": {
            "p2p-s-router-core-s-router-upstream-selector": {
              "acceptRA": false,
              "addr4": "10.10.0.3/31",
              "addr6": "fd42:dead:beef:1000:0:0:0:3/127",
              "addr6Public": null,
              "carrier": "lan",
              "dhcp": false,
              "export": false,
              "gateway": false,
              "kind": "p2p",
              "ra6Prefixes": [],
              "routes4": [],
              "routes6": [],
              "tenant": null
            },
            "p2p-s-router-policy-s-router-upstream-selector": {
              "acceptRA": false,
              "addr4": "10.10.0.5/31",
              "addr6": "fd42:dead:beef:1000:0:0:0:5/127",
              "addr6Public": null,
              "carrier": "lan",
              "dhcp": false,
              "export": false,
              "gateway": false,
              "kind": "p2p",
              "ra6Prefixes": [],
              "routes4": [],
              "routes6": [],
              "tenant": null
            }
          },
          "role": "upstream-selector"
        }
      },
      "policyNodeName": "s-router-policy",
      "siteName": "esp0xdeadbeef.site-a",
      "tenantV4Base": "10.20",
      "ulaPrefix": "fd42:dead:beef",
      "upstreamSelectorNodeName": "s-router-upstream-selector"
    }
  }
}
